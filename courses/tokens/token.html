<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Token Generator</title>
    <script src="token-generator.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input { padding: 8px; margin-right: 10px; }
        button { padding: 10px 20px; }
        .readonly-input { background-color: #f8f9fa; border-color: #ced4da; }
    </style>
</head>
<body>
    <p>Почта для связи: <input id="email" type="email" required></p>
    <p>ID Товара на сайте: <input id="product" readonly required></p>
    <p>Стоимость товара: <input id="cost" readonly class="readonly-input"></p>
    <button id="token">Сгенерировать</button>
    <div id="result"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const productParam = urlParams.get('product');
            const costParam = urlParams.get('cost');

            if (productParam) {
                document.getElementById('product').value = productParam;
            }

            if (costParam) {
                document.getElementById('cost').value = costParam;
            }

            // Добавляем обработчик здесь, чтобы гарантировать, что функция generate уже загружена
            document.getElementById('token').addEventListener('click', generate);
        });
    </script>
</body>
</html>
